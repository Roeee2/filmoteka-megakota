{"mappings":"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","sources":["<anon>","src/js/modal.js"],"sourcesContent":["(function () {\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequired7c6\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequired7c6\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $fJh0j = parcelRequire(\"fJh0j\");\n\nvar $iNWLi = parcelRequire(\"iNWLi\");\ndocument.addEventListener(\"DOMContentLoaded\", ()=>{\n    const modal = document.getElementById(\"filmModal\");\n    const galleryList = document.querySelector(\"ul.gallery-cards\");\n    let currentMovie = {};\n    const openModal = ()=>{\n        if (modal) {\n            modal.classList.remove(\"is-hidden\");\n            document.body.style.overflow = \"hidden\"; // Disable background scroll\n            const backdrop = document.querySelector(\".backdrop\");\n            backdrop.addEventListener(\"click\", closeModalOutside);\n            document.addEventListener(\"keydown\", closeModalOnEscKey);\n        }\n    };\n    const closeModal = ()=>{\n        if (modal) {\n            modal.classList.add(\"is-hidden\");\n            document.body.style.overflow = \"\"; // Re-enable background scroll\n            const backdrop = document.querySelector(\".backdrop\");\n            backdrop.removeEventListener(\"click\", closeModalOutside);\n            document.removeEventListener(\"keydown\", closeModalOnEscKey);\n        }\n    };\n    const closeModalOnEscKey = (event)=>{\n        if (event.key === \"Escape\") closeModal();\n    };\n    const closeModalOutside = (event)=>{\n        const modalContent = document.querySelector(\".modal\");\n        if (!modalContent.contains(event.target)) closeModal();\n    };\n    const closeButton = document.querySelector(\".modal-close-button\");\n    if (closeButton) closeButton.onclick = closeModal;\n    galleryList.addEventListener(\"click\", async (ev)=>{\n        if (ev.target.tagName === \"IMG\") {\n            const filmId = ev.target.id.split(\"-\")[1];\n            const filmInfo = await (0, $fJh0j.getFilmData)(filmId);\n            if (filmInfo) {\n                currentMovie = filmInfo;\n                updateModalContent(filmInfo);\n                openModal();\n            }\n        }\n    });\n    const updateModalContent = (filmData)=>{\n        document.getElementById(\"cover-image\").src = `https://image.tmdb.org/t/p/original${filmData.poster_path}`;\n        document.getElementById(\"movie-title\").innerText = filmData.original_title;\n        document.getElementById(\"film-votes\").innerText = filmData.vote_average.toFixed(1);\n        document.getElementById(\"film-votes-secondary\").innerText = filmData.vote_count;\n        document.getElementById(\"film-popularity\").innerText = Math.round(filmData.popularity);\n        document.getElementById(\"film-original-title\").innerText = filmData.original_title;\n        document.getElementById(\"film-genre\").innerText = filmData.genres.map((g)=>g.name).join(\", \");\n        document.getElementById(\"film-description\").innerHTML = `<h3>ABOUT</h3><p>${filmData.overview}</p>`;\n    };\n    const addToWatched = ()=>{\n        localStorage.setItem(`watched.${currentMovie.id}`, JSON.stringify(currentMovie));\n        if ((0, $fJh0j.isUserEmailStored)()) {\n            const userEmail = localStorage.getItem(\"userEmail\");\n            $iNWLi.addWatchedToUser(userEmail, currentMovie).then((currentMovie)=>{\n                console.log(`Added to watched in firestroe: ${currentMovie}`);\n            });\n        }\n    };\n    const addToQueue = ()=>{\n        localStorage.setItem(`queue.${currentMovie.id}`, JSON.stringify(currentMovie));\n        if ((0, $fJh0j.isUserEmailStored)()) {\n            const userEmail = localStorage.getItem(\"userEmail\");\n            $iNWLi.addQueueToUser(userEmail, currentMovie).then((currentMovie)=>{\n                console.log(`Added to queue in firestroe: ${currentMovie}`);\n            });\n        }\n    };\n    const watchedButton = document.querySelector(\".modal-buttons button:nth-child(1)\");\n    const queueButton = document.querySelector(\".modal-buttons button:nth-child(2)\");\n    if (watchedButton) watchedButton.onclick = addToWatched;\n    if (queueButton) queueButton.onclick = addToQueue;\n});\nasync function $40873ecf3c18e122$export$fb073058993321eb(results, page, totalPages) {\n    const galleryElement = document.querySelector(\".gallery-cards\");\n    galleryElement.innerHTML = \"\";\n    for (const result of results){\n        const { id: id, poster_path: poster_path, original_title: original_title, genre_ids: genre_ids, release_date: release_date } = result;\n        const getReleaseYear = release_date.split(\"-\")[0];\n        const genres = await makeGenresString(genre_ids);\n        const filmCard = `\n        <li class=\"film-card\" id=\"film-card-${id}\">\n          <div class=\"film-cover\">\n            <img class=\"film-img\" id=\"film-${id}\" src=\"https://image.tmdb.org/t/p/original${poster_path}\" alt=\"${original_title}\">\n          </div>\n          <div class=\"film-desc\">\n            <p class=\"card-film-title\">${original_title}</p>\n            <p class=\"film-info\">${genres} | ${getReleaseYear}</p>\n          </div>\n        </li>`;\n        galleryElement.insertAdjacentHTML(\"beforeend\", filmCard);\n    }\n    createPagination(page, totalPages, \"popularMovies\");\n}\n\n})();\n//# sourceMappingURL=index.6be4d1f7.js.map\n","import { getFilmData, isUserEmailStored } from './common';\nimport * as firebase from './firebase';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const modal = document.getElementById('filmModal');\n    const galleryList = document.querySelector('ul.gallery-cards');\n    let currentMovie = {};\n\n    const openModal = () => {\n        if (modal) {\n            modal.classList.remove('is-hidden');\n            document.body.style.overflow = 'hidden'; // Disable background scroll\n            const backdrop = document.querySelector('.backdrop');\n            backdrop.addEventListener('click', closeModalOutside);\n            document.addEventListener('keydown', closeModalOnEscKey);\n        }\n    };\n\n    const closeModal = () => {\n        if (modal) {\n            modal.classList.add('is-hidden');\n            document.body.style.overflow = ''; // Re-enable background scroll\n            const backdrop = document.querySelector('.backdrop');\n            backdrop.removeEventListener('click', closeModalOutside);\n            document.removeEventListener('keydown', closeModalOnEscKey);\n        }\n    };\n\n    const closeModalOnEscKey = event => {\n        if (event.key === 'Escape') {\n            closeModal();\n        }\n    };\n\n    const closeModalOutside = event => {\n        const modalContent = document.querySelector('.modal');\n        if (!modalContent.contains(event.target)) {\n            closeModal();\n        }\n    };\n\n    const closeButton = document.querySelector('.modal-close-button');\n    if (closeButton) {\n        closeButton.onclick = closeModal;\n    }\n\n    galleryList.addEventListener('click', async ev => {\n        if (ev.target.tagName === 'IMG') {\n            const filmId = ev.target.id.split('-')[1];\n            const filmInfo = await getFilmData(filmId);\n\n            if (filmInfo) {\n                currentMovie = filmInfo;\n                updateModalContent(filmInfo);\n                openModal();\n            }\n        }\n    });\n\n    const updateModalContent = filmData => {\n        document.getElementById(\n            'cover-image'\n        ).src = `https://image.tmdb.org/t/p/original${filmData.poster_path}`;\n        document.getElementById('movie-title').innerText = filmData.original_title;\n\n        document.getElementById('film-votes').innerText =\n            filmData.vote_average.toFixed(1);\n        document.getElementById('film-votes-secondary').innerText =\n            filmData.vote_count;\n        document.getElementById('film-popularity').innerText = Math.round(\n            filmData.popularity\n        );\n        document.getElementById('film-original-title').innerText =\n            filmData.original_title;\n        document.getElementById('film-genre').innerText = filmData.genres\n            .map(g => g.name)\n            .join(', ');\n\n        document.getElementById(\n            'film-description'\n        ).innerHTML = `<h3>ABOUT</h3><p>${filmData.overview}</p>`;\n    };\n\n    const addToWatched = () => {\n        localStorage.setItem(\n            `watched.${currentMovie.id}`,\n            JSON.stringify(currentMovie)\n        );\n        if (isUserEmailStored()) {\n            const userEmail = localStorage.getItem('userEmail')\n            firebase.addWatchedToUser(userEmail, currentMovie)\n                .then((currentMovie) => {\n                    console.log(`Added to watched in firestroe: ${currentMovie}`);\n                })\n        }\n    };\n\n    const addToQueue = () => {\n        localStorage.setItem(\n            `queue.${currentMovie.id}`,\n            JSON.stringify(currentMovie)\n        );\n        if (isUserEmailStored()) {\n            const userEmail = localStorage.getItem('userEmail')\n            firebase.addQueueToUser(userEmail, currentMovie)\n                .then((currentMovie) => {\n                    console.log(`Added to queue in firestroe: ${currentMovie}`);\n                })\n        }\n    };\n\n    const watchedButton = document.querySelector(\n        '.modal-buttons button:nth-child(1)'\n    );\n    const queueButton = document.querySelector(\n        '.modal-buttons button:nth-child(2)'\n    );\n\n    if (watchedButton) {\n        watchedButton.onclick = addToWatched;\n    }\n\n    if (queueButton) {\n        queueButton.onclick = addToQueue;\n    }\n});\n\nexport async function drawMovies(results, page, totalPages) {\n    const galleryElement = document.querySelector('.gallery-cards');\n    galleryElement.innerHTML = '';\n\n    for (const result of results) {\n        const { id, poster_path, original_title, genre_ids, release_date } = result;\n\n        const getReleaseYear = release_date.split('-')[0];\n        const genres = await makeGenresString(genre_ids);\n        const filmCard = `\n        <li class=\"film-card\" id=\"film-card-${id}\">\n          <div class=\"film-cover\">\n            <img class=\"film-img\" id=\"film-${id}\" src=\"https://image.tmdb.org/t/p/original${poster_path}\" alt=\"${original_title}\">\n          </div>\n          <div class=\"film-desc\">\n            <p class=\"card-film-title\">${original_title}</p>\n            <p class=\"film-info\">${genres} | ${getReleaseYear}</p>\n          </div>\n        </li>`;\n        galleryElement.insertAdjacentHTML('beforeend', filmCard);\n    }\n\n    createPagination(page, totalPages, 'popularMovies');\n}"],"names":["$parcel$global","$parcel$modules","$parcel$inits","parcelRequire","$fJh0j","$iNWLi","globalThis","self","window","global","id","exports","init","module","call","err","Error","code","register","document","addEventListener","modal","getElementById","galleryList","querySelector","currentMovie","openModal","classList","remove","body","style","overflow","backdrop","closeModalOutside","closeModalOnEscKey","closeModal","add","removeEventListener","event","key","modalContent","contains","target","closeButton","onclick","ev","tagName","filmId","split","filmInfo","getFilmData","updateModalContent","filmData","src","poster_path","innerText","original_title","vote_average","toFixed","vote_count","Math","round","popularity","genres","map","g","name","join","innerHTML","overview","watchedButton","queueButton","localStorage","setItem","JSON","stringify","isUserEmailStored","userEmail","getItem","addWatchedToUser","then","console","log","addQueueToUser"],"version":3,"file":"index.6be4d1f7.js.map"}